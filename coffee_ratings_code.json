{
    "0": "```R\\nlibrary(tidytuesdayR)\\nlibrary(tidyverse)\\ntheme_set(theme_light())\\n\\ncoffee_ratings <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2020/2020-07-07/coffee_ratings.csv')\\n\\ncoffee_ratings %>%\\n  mutate(coffee_id = row_number()) %>%\\n  filter(total_cup_points > 0)\\n\\nView(coffee_ratings)\\n```",
    "1": "```R\\ncoffee_ratings %>%\\n  count(species, sort = TRUE)\\n\\ncoffee_lumped <- coffee_ratings %>%\\n  filter(!is.na(variety)) %>%\\n  mutate(variety = fct_lump(variety, 12), sort = TRUE)\\n\\ncoffee_lumped %>%\\n  mutate(variety = fct_reorder(variety, total_cup_points)) %>%\\n  ggplot(aes(total_cup_points, variety)) +\\n  geom_boxplot()\\n\\ncoffee_lumped %>%\\n  ggplot(aes(total_cup_points, fill = variety)) +\\n  geom_histogram(binwidth = 2) +\\n  facet_wrap(~ variety, scale = \"free_y\") +\\n  theme(legend.position = \"none\")\\n```",
    "3": "```R\\ncoffee_ratings %>%\\n  summarize(across(everything(), ~ mean(!is.na(.)))) %>%\\n  gather() %>%\\n  View()\\n\\ncoffee_ratings %>%\\n  count(producer, sort = TRUE)\\n\\ncoffee_ratings %>%\\n  count(company, sort = TRUE)\\n\\ncoffee_ratings %>%\\n  count(color, sort = TRUE)\\n\\ncoffee_ratings %>%\\n  count(country = fct_lump(country_of_origin, 12), sort = TRUE) %>%\\n  filter(!is.na(country)) %>%\\n  mutate(country = fct_reorder(country, n)) %>%\\n  ggplot(aes(n, country)) +\\n  geom_col()\\n\\ncoffee_ratings %>%\\n  filter(!is.na(country_of_origin)) %>%\\n  mutate(country = fct_lump(country_of_origin, 12),\\n         country = fct_reorder(country, total_cup_points)) %>%\\n  ggplot(aes(total_cup_points, country)) +\\n  geom_boxplot()\\n```",
    "5": "```R\\nlibrary(ggridges)\\n\\ncoffee_metrics <- coffee_ratings %>%\\n  select(coffee_id, total_cup_points, variety, company,\\n         country_of_origin,\\n         aroma:moisture) %>%\\n  pivot_longer(aroma:cupper_points, names_to = \"metric\", values_to = \"value\")\\n\\ncoffee_metrics %>%\\n  mutate(metric = fct_reorder(metric, value)) %>%\\n  ggplot(aes(value, metric)) +\\n  geom_density_ridges()\\n```",
    "7": "```R\\nlibrary(widyr)\\nlibrary(ggraph)\\nlibrary(igraph)\\nlibrary(tidytext)\\n\\ncorrelations <- coffee_metrics %>%\\n  pairwise_cor(metric, coffee_id, value, sort = TRUE)\\n\\ncorrelations %>%\\n  head(60) %>%\\n  graph_from_data_frame() %>%\\n  ggraph() +\\n  geom_edge_link(aes(edge_alpha = correlation)) +\\n  geom_node_point() +\\n  geom_node_text(aes(label = name), repel = TRUE)\\n\\ncoffee_metrics %>%\\n  group_by(metric) %>%\\n  mutate(centered = value - mean(value)) %>%\\n  ungroup() %>%\\n  widely_svd(metric, coffee_id, value) %>%\\n  filter(dimension <= 4) %>%\\n  mutate(metric = reorder_within(metric, value, dimension)) %>%\\n  ggplot(aes(value, metric)) +\\n  geom_col() +\\n  scale_y_reordered() +\\n  facet_wrap(~ dimension, scales = \"free_y\")\\n```",
    "9": "```R\\ncoffee_ratings %>%\\n  filter(altitude_mean_meters < 10000) %>%\\n  mutate(altitude_mean_meters = pmin(altitude_mean_meters, 3000)) %>%\\n  ggplot(aes(altitude_mean_meters, total_cup_points)) +\\n  geom_point() +\\n  geom_smooth(method = \"lm\")\\n```",
    "11": "```R\\ncoffee_metrics %>%\\n  filter(altitude_mean_meters < 10000) %>%\\n  mutate(altitude_mean_meters = pmin(altitude_mean_meters, 3000)) %>%\\n  mutate(km = altitude_mean_meters / 1000) %>%\\n  group_by(metric) %>%\\n  summarize(correlation = cor(altitude_mean_meters, value),\\n            model = list(lm(value ~ km))) %>%\\n  mutate(tidied = map(model, broom::tidy, conf.int = TRUE)) %>%\\n  unnest(tidied) %>%\\n  filter(term == \"km\") %>%\\n  ungroup() %>%\\n  mutate(metric = fct_reorder(metric, estimate)) %>%\\n  ggplot(aes(estimate, metric, color = p.value < .05)) +\\n  geom_point() +\\n  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), height = .1) +\\n  labs(y = \"Evaluation of coffee\",\\n       x = \"Each kilometer of altitude contributes this much to score (95% confidence interval)\")\\n```"
}