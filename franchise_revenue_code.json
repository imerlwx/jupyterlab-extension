{
    "0": "```R\\nlibrary(tidyverse)\\ntheme_set(theme_light())\\n\\nmedia_franchises <- readr::read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-07-02/media_franchises.csv\")\\n\\nmedia_franchises %>%\\n  count(franchise, sort = TRUE)\\n\\nfranchises <- media_franchises %>%\\n  group_by(franchise, original_media, year_created, creators, owners) %>%\\n  summarize(categories = n(),\\n            total_revenue = sum(revenue),\\n            most_profitable = revenue_category[which.max(revenue)]) %>%\\n  ungroup()\\n\\nfranchises\\n```",
    "1": "```R\\nfranchises %>%\\n  semi_join(franchises %>% top_n(16, total_revenue), by = \"franchise\") %>%\\n  mutate(franchise = fct_reorder(franchise, revenue, sum),\\n         revenue_category = fct_reorder(revenue_category, -revenue, sum)) %>%\\n  ggplot(aes(franchise, revenue, fill = revenue_category)) +\\n  geom_col() +\\n  coord_flip() +\\n  labs(title = \"What are the most profitable franchises of all time?\",\\n       Fill = \"Category\")\\n```",
    "3": "```R\\nmedia_franchises %>%\\n  group_by(owners) %>%\\n  filter(n_distinct(franchise) > 1) %>%\\n  ungroup() %>%\\n  mutate(franchise = fct_reorder(franchise, revenue, sum),\\n         owners = fct_reorder(owners, -revenue, sum),\\n         revenue_category = fct_reorder(revenue_category, revenue, sum)) %>%\\n  ggplot(aes(franchise, revenue, fill = revenue_category)) +\\n  geom_col() +\\n  facet_wrap(~ owners, scales = \\\"free_y\\\") +\\n  guides(fill = guide_legend(reverse = TRUE)) +\\n  coord_flip() +\\n  labs(title = \\\"What companies own at least 3 franchises?\\\",\\n       fill = \\\"Category\\\",\\n       x = \\\"\\\",\\n       y = \\\"Revenue (Billions)\\\")\\n```",
    "5": "```R\\nfranchises %>%\\n  ggplot(aes(year_created, total_revenue)) +\\n  geom_point(aes(size = total_revenue)) +\\n  geom_text(aes(label = franchise), check_overlap = TRUE, vjust = 1, hjust = 1) +\\n  expand_limits(x = 1910) +\\n  labs(title = \"When were the 'great' franchises created?\")\\n  theme(legend.position = \"none\")\\n```",
    "7": "```R\\nmedia_franchises %>%\\n  group_by(original_media) %>%\\n  summarize(revenue = sum(revenue))\\n\\noriginal_media_revenue_categories <- media_franchises %>%\\n  group_by(original_media) %>%\\n  filter(sum(revenue) >= 45) %>%\\n  group_by(original_media, revenue_category) %>%\\n  summarize(revenue = sum(revenue)) %>%\\n  ungroup() %>%\\n  mutate(revenue_category = fct_reorder(revenue_category, revenue, sum),\\n         original_media = fct_reorder(original_media, -revenue, sum))\\n\\noriginal_media_revenue_categories %>%\\n  ggplot(aes(revenue_category, revenue)) +\\n  geom_col() +\\n  scale_y_continuous(labels = scales::dollar) +\\n  coord_flip() +\\n  facet_wrap(~ original_media) +\\n  labs(x = \\\"Revenue category\\\",\\n       y = \\\"Revenue (Billions)\\\",\\n       title = \\\"What kinds of media lead to what types of revenue?\\\")\\noriginal_media_revenue_categories %>%\\n  mutate(revenue_category = fct_rev(revenue_category),\\n         original_media = fct_rev(original_media)) %>%\\n  ggplot(aes(revenue_category, original_media, fill = revenue)) +\\n  geom_tile() +\\n  scale_fill_gradient2(low = \\\"white\\\", high = \\\"red\\\", labels = scales::dollar) +\\n  theme(panel.grid = element_blank(),\\n        axis.text.x = element_text(angle = 90, hjust = 1)) +\\n  labs(fill = \\\"Revenue (billions)\\\")\\n```",
    "9": "```R\\noriginal_media_revenue_categories %>%\\n  mutate(revenue_category = fct_rev(revenue_category),\\n         original_media = fct_rev(original_media)) %>%\\n  ggplot(aes(revenue_category, original_media, fill = revenue)) +\\n  geom_tile() +\\n  scale_fill_gradient2(low = \\\"white\\\", high = \\\"red\\\", labels = scales::dollar) +\\n  theme(panel.grid = element_blank(),\\n        axis.text.x = element_text(angle = 90, hjust = 1))  +\\n  labs(fill = \\\"Revenue (billions)\\\")\\n```",
    "11": "```R\\ntop_franchises <- franchises %>%\\n  mutate(franchise = glue(\\\"{ franchise } ({ year_created })\\\")) %>%\\n  top_n(20, total_revenue)\\n\\nmedia_franchises %>%\\n  mutate(franchise = glue(\\\"{ franchise } ({ year_created })\\\")) %>%\\n  semi_join(top_franchises, by = \\\"franchise\\\") %>%\\n  mutate(franchise = fct_reorder(franchise, revenue, sum),\\n         revenue_category = fct_reorder(revenue_category, revenue, sum)) %>%\\n  ggplot(aes(franchise, revenue)) +\\n  geom_col(aes(fill = revenue_category)) +\\n  geom_text(aes(y = total_revenue,\\n                label = paste0(scales::dollar(total_revenue, accuracy = 1), \\\"B\\\")),\\n            data = top_franchises,\\n            hjust = 0) +\\n  scale_y_continuous(labels = scales::dollar) +\\n  expand_limits(y = 100) +\\n  coord_flip() +\\n  theme(panel.grid.major.y = element_blank()) +\\n  guides(fill = guide_legend(reverse = TRUE)) +\\n  labs(title = \\\"What are the most profitable franchises of all time?\\\",\\n       fill = \\\"Category\\\",\\n       x = \\\"\\\",\\n       y = \\\"Revenue (Billions)\\\")\\n```"
}